# Configuration of Node Version Manager.
#
# This file is sourced on interactive invocations of zsh.
#   .zshenv -> .zprofile -> .zshrc -> [nvm] -> .zlogin

# nvm is not compatible with the "PREFIX" environment
# so, back up the variable if it exists to unset it before.
__prefix=""
[ -v PREFIX ] && __prefix="$PREFIX"

for d in $HOME/.nvm ${XDG_CONFIG_HOME:-$HOME/.config}/nvm; do
  if [ -d $d ]; then
    NVM_DIR="$d"

    [ -r $NVM_DIR/nvm.sh ] && {
        export NVM_DIR

        # nvm is not compatible with the "PREFIX" environment
        # variable. Unset it if it exists.
        [ $__prefix != "" ] && unset PREFIX

        source $NVM_DIR/nvm.sh
        break
    }
  fi
done
unset d

# Restore PREFIX variable if it was set.
if [ $__prefix != "" ]; then
  PREFIX="$__prefix"
  export PREFIX
fi
unset __prefix

# Local Variables:
# mode: shell-script
# End:
